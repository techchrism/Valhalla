
#include "MainMenuFrame.h"
#include "DemoFrame.h"

MainMenuFrame::MainMenuFrame()
{
    screenBuffer = ConsoleUtil::generateBuffer();
    ConsoleUtil::hideCursor(screenBuffer);

    string header[6];
    header[0] = "\xDB\xDB\xBB   \xDB\xDB\xBB \xDB\xDB\xDB\xDB\xDB\xBB \xDB\xDB\xBB     \xDB\xDB\xBB  \xDB\xDB\xBB \xDB\xDB\xDB\xDB\xDB\xBB \xDB\xDB\xBB     \xDB\xDB\xBB      \xDB\xDB\xDB\xDB\xDB\xBB";
    header[1] = "\xDB\xDB\xBA   \xDB\xDB\xBA\xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBB\xDB\xDB\xBA     \xDB\xDB\xBA  \xDB\xDB\xBA\xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBB\xDB\xDB\xBA     \xDB\xDB\xBA     \xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBB";
    header[2] = "\xDB\xDB\xBA   \xDB\xDB\xBA\xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBA\xDB\xDB\xBA     \xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBA\xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBA\xDB\xDB\xBA     \xDB\xDB\xBA     \xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBA";
    header[3] = "\xC8\xDB\xDB\xBB \xDB\xDB\xC9\xBC\xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBA\xDB\xDB\xBA     \xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBA\xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBA\xDB\xDB\xBA     \xDB\xDB\xBA     \xDB\xDB\xC9\xCD\xCD\xDB\xDB\xBA";
    header[4] = " \xC8\xDB\xDB\xDB\xDB\xC9\xBC \xDB\xDB\xBA  \xDB\xDB\xBA\xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBB\xDB\xDB\xBA  \xDB\xDB\xBA\xDB\xDB\xBA  \xDB\xDB\xBA\xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBB\xDB\xDB\xDB\xDB\xDB\xDB\xDB\xBB\xDB\xDB\xBA  \xDB\xDB\xBA";
    header[5] = "  \xC8\xCD\xCD\xCD\xBC  \xC8\xCD\xBC  \xC8\xCD\xBC\xC8\xCD\xCD\xCD\xCD\xCD\xCD\xBC\xC8\xCD\xBC  \xC8\xCD\xBC\xC8\xCD\xBC  \xC8\xCD\xBC\xC8\xCD\xCD\xCD\xCD\xCD\xCD\xBC\xC8\xCD\xCD\xCD\xCD\xCD\xCD\xBC\xC8\xCD\xBC  \xC8\xCD\xBC";

    short x = ConsoleUtil::getProportionalLength(screenBuffer, 0.5, header[0].length());
    short y = ConsoleUtil::getProportionalHeight(screenBuffer, 0.5, 9) - 3;
    for(int i = 0; i < 6; i++)
    {
        CHAR_INFO data[header[i].length()];
        for(int c = 0; c < header[i].length(); c++)
        {
            if(header[i][c] == (char) 219)
            {
                data[c].Attributes = 11;
            }
            else if(header[i][c] == ' ')
            {
                data[c].Attributes = WHITE_TEXT;
            }
            else
            {
                data[c].Attributes = 9;
            }

            data[c].Char.AsciiChar = header[i][c];
        }

        ConsoleUtil::writeOutput(screenBuffer, x, y + i, data, header[i].length(), 1);
    }

    string message = "Press enter to start";
    ConsoleUtil::printString(screenBuffer, ConsoleUtil::getProportionalLength(screenBuffer, 0.5, message.length()), y + 8, message);
}

void MainMenuFrame::handleInput(int code)
{
    if(code == KEY_ENTER)
    {
        guiFrameStackInterface->push(new DemoFrame());
    }
}